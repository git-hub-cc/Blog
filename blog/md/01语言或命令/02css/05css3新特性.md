# CSS3 新特性全面解析文档

## 目录

1.  [引言：什么是 CSS3？](#1)
2.  [第一部分：选择器 (Selectors)](#2)
3.  [第二部分：盒子模型与布局 (Box Model & Layout)](#3)
    *   [3.1 `box-sizing`](#3.1)
    *   [3.2 弹性盒子布局 (Flexbox)](#3.2)
    *   [3.3 网格布局 (Grid)](#3.3)
    *   [3.4 多列布局 (Multi-column)](#3.4)
4.  [第三部分：视觉效果 (Visual Effects)](#4)
    *   [4.1 圆角 (`border-radius`)](#4.1)
    *   [4.2 阴影 (`box-shadow` & `text-shadow`)](#4.2)
    *   [4.3 边框图片 (`border-image`)](#4.3)
    *   [4.4 背景增强](#4.4)
    *   [4.5 颜色与渐变 (Color & Gradients)](#4.5)
    *   [4.6 滤镜 (`filter`)](#4.6)
5.  [第四部分：2D/3D 转换 (Transforms)](#5)
    *   [5.1 2D 转换](#5.1)
    *   [5.2 3D 转换](#5.2)
6.  [第五部分：过渡与动画 (Transitions & Animations)](#6)
    *   [6.1 过渡 (`transition`)](#6.1)
    *   [6.2 动画 (`animation` & `@keyframes`)](#6.2)
7.  [第六部分：响应式设计与媒体查询 (Responsive Design & Media Queries)](#7)
8.  [第七部分：其他重要特性](#8)
    *   [8.1 自定义字体 (`@font-face`)](#8.1)
    *   [8.2 CSS 自定义属性 (变量)](#8.2)
    *   [8.3 计算函数 (`calc()`)](#8.3)
    *   [8.4 图片适配 (`object-fit`)](#8.4)
9.  [总结](#9)

---

<a name="1"></a>
## 1. 引言：什么是 CSS3？

CSS3 并非一个单一的技术规范，而是对 CSS（层叠样式表）的一系列模块化增强。与 CSS2.1 是一个整体规范不同，CSS3 被拆分为多个独立的模块，每个模块都有自己的开发进度和浏览器支持情况。这种模块化的方法使得 CSS 标准能够更快地发展和演进。

CSS3 带来了大量强大的新特性，彻底改变了 Web 前端开发的方式，使得开发者可以仅用 CSS 就实现过去需要 JavaScript 或图片才能完成的复杂布局和酷炫效果。

---

<a name="2"></a>
## 2. 第一部分：选择器 (Selectors)

CSS3 引入了大量新的伪类和伪元素选择器，极大地增强了 CSS 定位元素的能力，减少了对 HTML 中不必要的 `class` 和 `id` 的依赖。

| 选择器               | 描述                                       | 示例                          |
| -------------------- | ------------------------------------------ | ----------------------------- |
| `E[attr^="val"]`     | 匹配属性 `attr` 的值以 `val` 开头的 E 元素。  | `a[href^="http"]`             |
| `E[attr$="val"]`     | 匹配属性 `attr` 的值以 `val` 结尾的 E 元素。  | `img[src$=".jpg"]`             |
| `E[attr*="val"]`     | 匹配属性 `attr` 的值包含 `val` 的 E 元素。    | `p[class*="warning"]`         |
| `:root`              | 匹配文档的根元素，在 HTML 中即 `<html>` 元素。 | `:root { --main-color: blue; }` |
| `:nth-child(n)`      | 匹配其父元素下的第 n 个子元素。              | `li:nth-child(2n)` (偶数行)   |
| `:nth-of-type(n)`    | 匹配其父元素下同类型的第 n 个子元素。        | `p:nth-of-type(1)`            |
| `:last-child`        | 匹配其父元素下的最后一个子元素。             | `li:last-child`               |
| `:only-child`        | 匹配其父元素下唯一的子元素。                 | `p:only-child`                |
| `:not(selector)`     | 匹配不符合 `selector` 的所有元素。            | `input:not([disabled])`       |
| `:target`            | 匹配当前活动的锚点目标元素。                 | `#section1:target`            |
| `:enabled` / `:disabled` | 匹配启用/禁用的表单控件。                  | `input:disabled`              |
| `:checked`           | 匹配被选中的 `checkbox` 或 `radio`。        | `input[type="radio"]:checked` |
| `::selection`        | 匹配用户选中的文本部分。                     | `::selection { background: yellow; }` |

---

<a name="3"></a>
## 3. 第二部分：盒子模型与布局 (Box Model & Layout)

CSS3 在布局方面引入了革命性的变化，Flexbox 和 Grid 让复杂的页面布局变得前所未有的简单和强大。

<a name="3.1"></a>
### 3.1 `box-sizing`

该属性允许你重新定义盒子模型的计算方式。
- `content-box` (默认值): `width` 和 `height` 只包含内容区域，不包括 `padding` 和 `border`。
- `border-box`: `width` 和 `height` 包含内容、`padding` 和 `border`，使得布局计算更加直观。

```css
/* 应用到所有元素，是现代 CSS 开发的最佳实践 */
*, *::before, *::after {
  box-sizing: border-box;
}
```

<a name="3.2"></a>
### 3.2 弹性盒子布局 (Flexbox)

Flexbox 是一种一维布局模型，为容器中的项目提供了强大的空间分布和对齐能力。

**容器属性 (Container Properties):**
- `display: flex;` 或 `inline-flex;`
- `flex-direction`: `row` | `row-reverse` | `column` | `column-reverse` (主轴方向)
- `justify-content`: `flex-start` | `flex-end` | `center` | `space-between` | `space-around` (主轴对齐)
- `align-items`: `stretch` | `flex-start` | `flex-end` | `center` | `baseline` (交叉轴对齐)
- `flex-wrap`: `nowrap` | `wrap` | `wrap-reverse` (是否换行)
- `align-content`: `flex-start` | `flex-end` | `center` | `space-between` | `space-around` | `stretch` (多行/列对齐)

**项目属性 (Item Properties):**
- `flex-grow`: (数字) 放大比例
- `flex-shrink`: (数字) 缩小比例
- `flex-basis`: (长度) 初始大小
- `flex`: `flex-grow`, `flex-shrink`, `flex-basis` 的简写
- `order`: (整数) 项目排序

```css
.container {
  display: flex;
  justify-content: space-around;
  align-items: center;
  height: 200px;
  background-color: #f0f0f0;
}
.item {
  width: 50px;
  height: 50px;
  background-color: dodgerblue;
}
```

<a name="3.3"></a>
### 3.3 网格布局 (Grid)

Grid 是一个二维布局系统，可以同时处理行和列，是迄今为止最强大的 CSS 布局方案。

**容器属性 (Container Properties):**
- `display: grid;` 或 `inline-grid;`
- `grid-template-columns`: 定义列宽 (e.g., `100px 1fr 2fr;`)
- `grid-template-rows`: 定义行高
- `gap` (`grid-gap`): 定义网格线间距 (e.g., `10px;`)
- `justify-items` / `align-items`: 网格项在单元格内的对齐

**项目属性 (Item Properties):**
- `grid-column-start` / `grid-column-end`: 项目跨越的列
- `grid-row-start` / `grid-row-end`: 项目跨越的行
- `grid-column` / `grid-row`: 上述属性的简写 (e.g., `1 / 3`)
- `justify-self` / `align-self`: 单个网格项的对齐

```css
.grid-container {
  display: grid;
  grid-template-columns: auto auto auto;
  gap: 10px;
  background-color: #2196F3;
  padding: 10px;
}
.grid-item {
  background-color: rgba(255, 255, 255, 0.8);
  text-align: center;
  padding: 20px;
}
.item1 {
  grid-column: 1 / span 2; /* 跨越两列 */
}
```

<a name="3.4"></a>
### 3.4 多列布局 (Multi-column)

允许将内容像报纸一样分栏显示。

- `column-count`: 列数
- `column-width`: 列宽
- `column-gap`: 列间距
- `column-rule`: 列之间的分割线样式

```css
.newspaper {
  column-count: 3;
  column-gap: 40px;
  column-rule: 1px solid lightblue;
}
```

---

<a name="4"></a>
## 4. 第三部分：视觉效果 (Visual Effects)

CSS3 提供了丰富的视觉效果属性，让网页设计更加生动。

<a name="4.1"></a>
### 4.1 圆角 (`border-radius`)

用于创建圆角边框。

```css
.box {
  border: 2px solid #ccc;
  border-radius: 10px; /* 四个角都是10px */
}
.circle {
  width: 100px;
  height: 100px;
  border-radius: 50%; /* 创建一个圆形 */
}
```

<a name="4.2"></a>
### 4.2 阴影 (`box-shadow` & `text-shadow`)

- `box-shadow`: 为元素盒子添加阴影。
- `text-shadow`: 为文本添加阴影。

```css
/* box-shadow: h-shadow v-shadow blur spread color inset; */
.box {
  box-shadow: 5px 5px 15px 5px rgba(0,0,0,0.3);
}

/* text-shadow: h-shadow v-shadow blur color; */
h1 {
  text-shadow: 2px 2px 5px grey;
}
```

<a name="4.3"></a>
### 4.3 边框图片 (`border-image`)

使用图片作为元素的边框。

```css
.frame {
  border: 10px solid transparent;
  padding: 15px;
  border-image: url(border.png) 30 round; /* source slice repeat */
}
```

<a name="4.4"></a>
### 4.4 背景增强

- **多重背景**: 一个元素可以设置多个背景图像。
- `background-size`: 控制背景图片的大小 (`cover`, `contain`, 或具体尺寸)。
- `background-origin`: 定义背景图片的原点 (`padding-box`, `border-box`, `content-box`)。
- `background-clip`: 定义背景的绘制区域。

```css
.multi-bg {
  background-image: url(bg1.png), url(bg2.jpg);
  background-repeat: no-repeat, repeat;
  background-position: right bottom, left top;
  background-size: 50px, auto;
}
```

<a name="4.5"></a>
### 4.5 颜色与渐变 (Color & Gradients)

- **RGBA & HSLA**: 带有 Alpha 透明度通道的颜色模式。
- **渐变 (Gradients)**: 创建平滑的颜色过渡，可替代图片。
    - `linear-gradient()`: 线性渐变。
    - `radial-gradient()`: 径向渐变。

```css
/* 透明颜色 */
.overlay {
  background-color: rgba(0, 0, 0, 0.5); /* 半透明黑色 */
}
/* 线性渐变 */
.gradient-box {
  background-image: linear-gradient(to right, red, yellow);
}
```

<a name="4.6"></a>
### 4.6 滤镜 (`filter`)

为元素（通常是图片）应用图形效果，如模糊、灰度、饱和度等。

```css
img.blurry {
  filter: blur(5px);
}
img.grayscale {
  filter: grayscale(100%);
}
```

---

<a name="5"></a>
## 5. 第四部分：2D/3D 转换 (Transforms)

`transform` 属性允许你对元素进行移动、旋转、缩放和倾斜，且不影响文档流。

<a name="5.1"></a>
### 5.1 2D 转换

- `translate(x, y)`: 移动
- `rotate(angle)`: 旋转
- `scale(x, y)`: 缩放
- `skew(x-angle, y-angle)`: 倾斜

```css
.box:hover {
  transform: rotate(15deg) scale(1.2);
}
```

<a name="5.2"></a>
### 5.2 3D 转换

在 Z 轴上增加深度，创造 3D 效果。
- `translate3d(x, y, z)`
- `rotateX(angle)`, `rotateY(angle)`, `rotateZ(angle)`
- `scale3d(x, y, z)`
- `perspective`: 为 3D 转换元素定义透视视图。
- `transform-style: preserve-3d`: 使子元素也继承 3D 空间。

```css
.card-container {
  perspective: 1000px;
}
.card {
  transform-style: preserve-3d;
  transition: transform 0.6s;
}
.card:hover {
  transform: rotateY(180deg);
}
```

---

<a name="6"></a>
## 6. 第五部分：过渡与动画 (Transitions & Animations)

CSS3 使得创建流畅的动画效果变得无需依赖 JavaScript。

<a name="6.1"></a>
### 6.1 过渡 (`transition`)

当元素的某个 CSS 属性值改变时，平滑地从旧值过渡到新值。常与 `:hover`, `:active`, `:focus` 等伪类配合使用。

- `transition-property`: 指定应用过渡的属性。
- `transition-duration`: 过渡持续时间。
- `transition-timing-function`: 过渡速度曲线 (`ease`, `linear`, `ease-in-out`, `cubic-bezier(...)`)。
- `transition-delay`: 过渡延迟时间。
- `transition`: 上述属性的简写。

```css
.button {
  background-color: dodgerblue;
  transition: background-color 0.5s ease;
}
.button:hover {
  background-color: royalblue;
}
```

<a name="6.2"></a>
### 6.2 动画 (`animation` & `@keyframes`)

通过定义关键帧 (`@keyframes`) 来创建更复杂的、可循环的动画。

- `@keyframes`: 定义动画序列的各个阶段。
- `animation-name`: 绑定的 `@keyframes` 名称。
- `animation-duration`: 动画时长。
- `animation-iteration-count`: 播放次数 (`infinite` 表示无限次)。
- `animation-direction`: 播放方向 (`normal`, `alternate`)。
- `animation-timing-function`: 速度曲线。
- `animation-fill-mode`: 动画结束后的状态。
- `animation`: 上述属性的简写。

```css
/* 定义动画 */
@keyframes slide-in {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* 应用动画 */
.element {
  animation: slide-in 1s ease-out forwards;
}
```

---

<a name="7"></a>
## 7. 第六部分：响应式设计与媒体查询 (Responsive Design & Media Queries)

媒体查询是响应式网页设计的核心。它允许你根据设备的特性（如视口宽度、屏幕方向、分辨率等）来应用不同的 CSS 规则。

```css
/* 默认样式 (移动优先) */
.container {
  width: 100%;
}

/* 平板设备及以上 */
@media (min-width: 768px) {
  .container {
    width: 750px;
    margin: 0 auto;
  }
}

/* 桌面设备 */
@media (min-width: 1200px) {
  .container {
    width: 1170px;
  }
}
```

---

<a name="8"></a>
## 8. 第七部分：其他重要特性

<a name="8.1"></a>
### 8.1 自定义字体 (`@font-face`)

允许你在网页上使用任何字体，只需将字体文件托管在服务器上。

```css
@font-face {
  font-family: 'MyCustomFont';
  src: url('myfont.woff2') format('woff2'),
       url('myfont.woff') format('woff');
}

body {
  font-family: 'MyCustomFont', sans-serif;
}
```

<a name="8.2"></a>
### 8.2 CSS 自定义属性 (变量)

也称为 CSS 变量，允许你定义可复用的值，极大提高了 CSS 代码的可维护性和灵活性，特别适合主题切换等场景。

```css
:root {
  --primary-color: #3498db;
  --base-font-size: 16px;
}

a {
  color: var(--primary-color);
}

p {
  font-size: var(--base-font-size);
}
```

<a name="8.3"></a>
### 8.3 计算函数 (`calc()`)

允许在 CSS 属性值中进行数学计算，甚至可以混合不同单位。

```css
.element {
  width: calc(100% - 80px); /* 动态计算宽度 */
  height: calc(10vh + 20px);
}
```

<a name="8.4"></a>
### 8.4 图片适配 (`object-fit`)

定义 `<img>` 或 `<video>` 等替换元素的内容如何适应其指定的容器尺寸。

- `fill`: (默认) 拉伸填充。
- `contain`: 保持宽高比，完整显示，可能会有留白。
- `cover`: 保持宽高比，填满容器，可能会裁剪。
- `none`: 保持原始尺寸。
- `scale-down`: 同 `none` 或 `contain` 中较小的那个。

```css
img {
  width: 200px;
  height: 200px;
  object-fit: cover; /* 像背景图的 cover 一样，不变形地填满容器 */
}
```
---

<a name="9"></a>
## 9. 总结

CSS3 是一次巨大的飞跃，它将 CSS 从一个简单的样式定义语言，转变为一个强大的、能够处理复杂布局、动画和视觉效果的工具。理解并熟练掌握这些新特性，是现代 Web 前端开发的必备技能。随着 CSS 标准的不断演进，未来还将有更多激动人心的特性（如容器查询、级联层等）加入，持续推动 Web 设计与开发的边界。