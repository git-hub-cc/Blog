好的，这是一份关于 JavaScript 事件的完整分类文档。文档从核心概念讲起，然后对事件进行详细分类，并包含最佳实践，力求内容完整和清晰。

---

# JavaScript 事件（Events）完整分类与详解

## 目录

1.  [**核心概念**](#1-核心概念)
    *   [什么是事件？](#什么是事件)
    *   [事件流：冒泡与捕获](#事件流冒泡与捕获)
    *   [事件对象 (Event Object)](#事件对象-event-object)
    *   [事件委托 (Event Delegation)](#事件委托-event-delegation)
2.  [**事件分类**](#2-事件分类)
    *   [鼠标事件 (Mouse Events)](#鼠标事件-mouse-events)
    *   [键盘事件 (Keyboard Events)](#键盘事件-keyboard-events)
    *   [焦点事件 (Focus Events)](#焦点事件-focus-events)
    *   [表单事件 (Form Events)](#表单事件-form-events)
    *   [窗口/文档事件 (Window/Document Events)](#窗口文档事件-windowdocument-events)
    *   [指针事件 (Pointer Events) - **推荐**](#指针事件-pointer-events---推荐)
    *   [触摸事件 (Touch Events)](#触摸事件-touch-events)
    *   [拖放事件 (Drag & Drop Events)](#拖放事件-drag--drop-events)
    *   [剪贴板事件 (Clipboard Events)](#剪贴板事件-clipboard-events)
    *   [CSS 事件 (CSS Events)](#css-事件-css-events)
    *   [媒体事件 (Media Events)](#媒体事件-media-events)
    *   [其他通用事件 (Other/General Events)](#其他通用事件-othergeneral-events)
3.  [**事件监听与最佳实践**](#3-事件监听与最佳实践)
    *   [添加事件监听器](#添加事件监听器)
    *   [移除事件监听器](#移除事件监听器)
    *   [最佳实践总结](#最佳实践总结)

---

## 1. 核心概念

### 什么是事件？
在 JavaScript 中，事件是发生在浏览器窗口或文档中的特定行为或发生的事情，例如用户点击一个按钮、在文本框中输入文字、或者页面加载完成。我们可以编写代码（称为“事件处理器”或“事件监听器”）来响应这些事件。

### 事件流：冒泡与捕获
当一个事件发生在嵌套的元素上时，它会经历一个流程，这个流程被称为事件流。

1.  **捕获阶段 (Capturing Phase)**：事件从最外层的祖先元素（通常是 `window`）开始，逐级向下传播到目标元素。
2.  **目标阶段 (Target Phase)**：事件到达触发它的具体元素（事件目标）。
3.  **冒泡阶段 (Bubbling Phase)**：事件从事件目标开始，逐级向上传播到最外层的祖先元素（`window`）。

默认情况下，大多数事件处理器都在 **冒泡阶段** 执行。

### 事件对象 (Event Object)
当事件被触发时，浏览器会自动创建一个事件对象，并将其作为参数传递给事件处理器函数。这个对象包含了与事件相关的所有信息。

**常用属性和方法：**
*   `event.target`: 触发事件的原始元素。
*   `event.currentTarget`: 事件监听器当前所附加到的元素。
*   `event.preventDefault()`: 阻止事件的默认行为（例如，阻止 `<a>` 标签的跳转，或 `<form>` 的提交）。
*   `event.stopPropagation()`: 停止事件在 DOM 树中的传播（停止冒泡或捕获）。
*   `event.type`: 事件的类型（如 `"click"`）。

### 事件委托 (Event Delegation)
事件委托是一种利用事件冒泡的强大技术。它不是将事件监听器添加到每个子元素上，而是添加到它们的父元素上。当子元素上的事件冒泡到父元素时，可以通过检查 `event.target` 来确定是哪个子元素触发了事件，并执行相应的操作。

**优点：**
*   **性能更高**：减少了需要绑定的监听器数量。
*   **动态性**：对于动态添加或删除的子元素，无需重新绑定事件。

## 2. 事件分类

### 鼠标事件 (Mouse Events)
与鼠标操作相关的事件。

| 事件名 | 描述 | 注意 |
| :--- | :--- | :--- |
| `click` | 用户单击元素时触发（`mousedown` 和 `mouseup` 组合）。 | 最常用的鼠标事件。 |
| `dblclick` | 用户双击元素时触发。 | |
| `mousedown` | 用户按下鼠标按钮时触发。 | 在 `click` 之前触发。 |
| `mouseup` | 用户释放鼠标按钮时触发。 | 在 `click` 之前触发。 |
| `mousemove` | 鼠标指针在元素内部移动时连续触发。 | 性能开销较大，注意节流。 |
| `mouseover` | 鼠标指针进入元素 **或其子元素** 时触发。 | **会冒泡**。 |
| `mouseout` | 鼠标指针离开元素 **或其子元素** 时触发。 | **会冒泡**。 |
| `mouseenter` | 鼠标指针进入元素时触发。 | **不冒泡**，通常比 `mouseover` 更易用。 |
| `mouseleave` | 鼠标指针离开元素时触发。 | **不冒泡**，通常比 `mouseout` 更易用。 |
| `contextmenu` | 用户右击元素打开上下文菜单时触发。 | 可以使用 `preventDefault()` 阻止默认菜单。 |

### 键盘事件 (Keyboard Events)

| 事件名 | 描述 | 注意 |
| :--- | :--- | :--- |
| `keydown` | 用户按下任意键时触发，按住不放会连续触发。 | 可以捕获所有按键，包括功能键（Shift, Ctrl）。 |
| `keyup` | 用户释放按键时触发。 | |
| `keypress` | **[已废弃]** 用户按下产生字符的键时触发。 | 不推荐使用，应使用 `keydown` 替代。 |

**键盘事件对象常用属性：**
*   `event.key`: 按键的字符值（如 `"a"`, `"Enter"`, `"Shift"`）。
*   `event.code`: 按键的物理代码（如 `"KeyA"`, `"Enter"`, `"ShiftLeft"`），不受布局影响。
*   `event.keyCode`: **[已废弃]** 按键的数字码。不推荐使用。

### 焦点事件 (Focus Events)
当元素获得或失去焦点时触发。

| 事件名 | 描述 | 注意 |
| :--- | :--- | :--- |
| `focus` | 元素获得焦点时触发。 | **不冒泡**。 |
| `blur` | 元素失去焦点时触发。 | **不冒泡**。 |
| `focusin` | 元素或其子元素获得焦点时触发。 | **会冒泡**，是 `focus` 的冒泡版本。 |
| `focusout` | 元素或其子元素失去焦点时触发。 | **会冒泡**，是 `blur` 的冒泡版本。 |

### 表单事件 (Form Events)
与表单元素交互时触发。

| 事件名 | 描述 |
| :--- | :--- |
| `submit` | 用户点击提交按钮 (`<input type="submit">`) 或在表单中按 Enter 键时，在 `<form>` 元素上触发。 |
| `reset` | 用户点击重置按钮 (`<input type="reset">`) 时，在 `<form>` 元素上触发。 |
| `change` | 当 `<input>`, `<select>`, `<textarea>` 的值发生改变并 **失去焦点** 后触发。 |
| `input` | 当 `<input>` 或 `<textarea>` 的值 **实时改变** 时触发。常用于实时搜索或字数统计。 |
| `invalid` | 当元素未能通过表单验证时触发。 |
| `select` | 用户在 `<input>` 或 `<textarea>` 中选中文本时触发。 |

### 窗口/文档事件 (Window/Document Events)
与整个浏览器窗口或文档相关的事件。通常在 `window` 或 `document` 对象上监听。

| 事件名 | 描述 |
| :--- | :--- |
| `load` | 整个页面（包括所有资源如图片、样式表）完全加载后在 `window` 上触发。 |
| `DOMContentLoaded` | 仅当 HTML 文档被完全加载和解析完成后在 `document` 上触发，无需等待样式表、图像等资源。 |
| `unload` | **[已废弃]** 用户离开页面时在 `window` 上触发。 |
| `beforeunload` | 用户即将离开页面时在 `window` 上触发。可用于提示用户“是否确认离开”。 |
| `resize` | 浏览器窗口大小改变时在 `window` 上触发。 |
| `scroll` | 用户滚动文档或元素时触发。常用于无限滚动、懒加载、视差效果。 |
| `hashchange` | URL 的 hash（`#` 后面的部分）发生变化时在 `window` 上触发。对单页应用很重要。 |
| `popstate` | 用户通过浏览器历史（前进/后退按钮）导航时在 `window` 上触发。 |

### 指针事件 (Pointer Events) - **推荐**
这是一个现代的、统一的事件模型，用于处理来自鼠标、触摸屏、手写笔等所有类型的指针输入。**推荐优先使用指针事件**，因为它能简化跨设备的代码。

| 事件名 | 描述 | 对应鼠标/触摸事件 |
| :--- | :--- | :--- |
| `pointerdown` | 指针（鼠标、手指、笔）按下时触发。 | `mousedown`, `touchstart` |
| `pointerup` | 指针抬起时触发。 | `mouseup`, `touchend` |
| `pointermove` | 指针移动时触发。 | `mousemove`, `touchmove` |
| `pointerover` | 指针进入元素及其子元素时触发。 | `mouseover` |
| `pointerout` | 指针离开元素及其子元素时触发。 | `mouseout` |
| `pointerenter` | 指针进入元素时触发（不冒泡）。 | `mouseenter` |
| `pointerleave` | 指针离开元素时触发（不冒泡）。 | `mouseleave` |
| `pointercancel` | 指针交互被取消时（如设备方向改变）。 | `touchcancel` |

### 触摸事件 (Touch Events)
专门为触摸屏设备设计的事件。如果不需要区分触摸和鼠标，请优先使用指针事件。

| 事件名 | 描述 |
| :--- | :--- |
| `touchstart` | 手指触摸到屏幕时触发。 |
| `touchmove` | 手指在屏幕上滑动时连续触发。 |
| `touchend` | 手指离开屏幕时触发。 |
| `touchcancel` | 触摸被系统中断（如来电）时触发。 |

### 拖放事件 (Drag & Drop Events)
用于实现元素的拖放功能。

**在被拖动的元素上触发：**
*   `dragstart`: 开始拖动元素时触发。
*   `drag`: 拖动过程中持续触发。
*   `dragend`: 拖动操作结束时（无论是否成功）触发。

**在放置目标上触发：**
*   `dragenter`: 被拖动的元素进入放置目标时触发。
*   `dragover`: 被拖动的元素在放置目标上移动时持续触发。**必须在此事件中调用 `preventDefault()` 才能允许放置**。
*   `dragleave`: 被拖动的元素离开放置目标时触发。
*   `drop`: 在放置目标上释放被拖动的元素时触发。

### 剪贴板事件 (Clipboard Events)

| 事件名 | 描述 |
| :--- | :--- |
| `copy` | 用户复制内容到剪贴板时触发。 |
| `cut` | 用户剪切内容到剪贴板时触发。 |
| `paste` | 用户从剪贴板粘贴内容时触发。 |

### CSS 事件 (CSS Events)

| 事件名 | 描述 |
| :--- | :--- |
| `transitionend` | CSS 过渡（transition）完成后触发。 |
| `animationstart` | CSS 动画（animation）开始时触发。 |
| `animationend` | CSS 动画完成时触发。 |
| `animationiteration` | CSS 动画完成一次迭代后触发（如果 `animation-iteration-count` > 1）。 |

### 媒体事件 (Media Events)
与 `<audio>` 和 `<video>` 元素相关的事件。

| 事件名 | 描述 |
| :--- | :--- |
| `play` | 媒体开始播放时触发。 |
| `pause` | 媒体暂停播放时触发。 |
| `ended` | 媒体播放到结尾时触发。 |
| `timeupdate` | 播放位置改变时持续触发。 |
| `volumechange` | 音量改变时触发。 |
| `waiting` | 因缓冲不足而暂停播放时触发。 |
| `canplay` | 浏览器可以开始播放媒体，但可能需要缓冲。 |
| `canplaythrough` | 浏览器认为无需缓冲即可不间断地播放到结尾。 |

### 其他通用事件 (Other/General Events)

| 事件名 | 描述 |
| :--- | :--- |
| `error` | 当资源（如 `<img>`, `<script>`）加载失败，或脚本中发生错误时触发。 |
| `contextmenu` | 右键点击元素时触发。 |

## 3. 事件监听与最佳实践

### 添加事件监听器
推荐使用 `addEventListener()` 方法。

```javascript
const myButton = document.getElementById('myButton');

function handleClick(event) {
  console.log('Button clicked!');
  console.log('Event type:', event.type);      // 'click'
  console.log('Target element:', event.target); // The button element
}

myButton.addEventListener('click', handleClick);
```

**语法：**
`element.addEventListener(eventType, handlerFunction, useCapture);`
*   `eventType`: 事件类型的字符串（如 `"click"`，不带 `on`）。
*   `handlerFunction`: 事件触发时要执行的函数。
*   `useCapture`: (可选) 布尔值，`true` 表示在捕获阶段处理，`false` (默认) 表示在冒泡阶段处理。

### 移除事件监听器
使用 `removeEventListener()`，必须传入与添加时完全相同的函数引用。

```javascript
// 必须是同一个函数引用，匿名函数无法移除
myButton.removeEventListener('click', handleClick);
```

### 最佳实践总结
1.  **优先使用 `addEventListener`**: 它比 `on<event>` 属性（如 `element.onclick`）更灵活，允许绑定多个处理器。
2.  **善用事件委托**: 在列表或表格等场景下，将事件监听器绑定到父元素上以提升性能和简化代码。
3.  **注意 `this` 的指向**: 在事件处理器中，`this` 通常指向 `event.currentTarget`。使用箭头函数时，`this` 会保持其外部词法作用域的指向。
4.  **及时移除监听器**: 在不再需要事件监听时（尤其是在单页应用中组件销毁时），务必使用 `removeEventListener` 将其移除，以防止内存泄漏。
5.  **对高频事件进行节流/防抖**: 对于 `scroll`, `resize`, `mousemove` 等高频触发的事件，使用节流 (Throttle) 或防抖 (Debounce) 技术来控制处理函数的执行频率，避免性能问题。
6.  **优先使用指针事件**: 为了更好的跨设备兼容性（鼠标、触摸、笔），优先考虑使用 Pointer Events。

---