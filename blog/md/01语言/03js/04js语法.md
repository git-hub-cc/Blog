好的，这是一份对 JavaScript (JS) 语法进行系统性分类的完整文档。文档从基础概念开始，逐步深入到高级和现代特性，旨在为初学者和有经验的开发者提供一个清晰、完整的参考。

---

# JavaScript (JS) 核心语法大全

## 目录

1.  [基础语法 (Basic Syntax)](#1-基础语法-basic-syntax)
2.  [数据类型 (Data Types)](#2-数据类型-data-types)
3.  [变量与常量 (Variables & Constants)](#3-变量与常量-variables--constants)
4.  [运算符 (Operators)](#4-运算符-operators)
5.  [控制流 (Control Flow)](#5-控制流-control-flow)
6.  [函数 (Functions)](#6-函数-functions)
7.  [对象 (Objects)](#7-对象-objects)
8.  [数组 (Arrays)](#8-数组-arrays)
9.  [ES6+ 核心新特性 (Core ES6+ Features)](#9-es6-核心新特性-core-es6-features)
10. [异步编程 (Asynchronous Programming)](#10-异步编程-asynchronous-programming)
11. [模块化 (Modules)](#11-模块化-modules)
12. [错误处理 (Error Handling)](#12-错误处理-error-handling)
13. [JSON](#13-json)
14. [Web APIs (浏览器环境)](#14-web-apis-浏览器环境)

---

### 1. 基础语法 (Basic Syntax)

JS 语法是区分大小写的，并使用 Unicode 字符集。

-   **注释 (Comments)**:
    -   单行注释: `// 这是单行注释`
    -   多行注释: `/* 这是多行注释 */`

-   **语句 (Statements)**:
    -   JS 代码由一系列语句组成，通常以分号 (`;`) 结尾。分号在很多情况下可以省略（由于自动分号插入机制，ASI），但为了代码清晰和避免潜在问题，建议始终使用分号。
    ```javascript
    let name = "Alice";
    console.log(name);
    ```

### 2. 数据类型 (Data Types)

JS 的数据类型分为两大类：**原始类型 (Primitive Types)** 和 **对象类型 (Object Type)**。

-   **原始类型 (Primitive Types)**:
    1.  **String**: 文本字符串，用单引号 `'...'`、双引号 `"..."` 或模板字符串 `` `...` `` 包裹。
        ```javascript
        let greeting = "Hello, world!";
        ```
    2.  **Number**: 数字，包括整数和浮点数。还有一些特殊值，如 `Infinity`, `-Infinity`, 和 `NaN` (Not-a-Number)。
        ```javascript
        let age = 25;
        let price = 99.9;
        ```
    3.  **Boolean**: 逻辑值，只有 `true` 和 `false` 两个值。
        ```javascript
        let isActive = true;
        ```
    4.  **Null**: 表示“无”或“空”的意图性空值。它是一个特殊的对象。
        ```javascript
        let emptyValue = null;
        ```
    5.  **Undefined**: 表示变量已声明但未赋值。
        ```javascript
        let notAssigned; // 值为 undefined
        ```
    6.  **Symbol** (ES6+): 表示唯一的、不可变的值，通常用作对象属性的键。
        ```javascript
        const id = Symbol('id');
        ```
    7.  **BigInt** (ES2020+): 用于表示任意精度的整数，可以安全地存储和操作大整数。
        ```javascript
        const bigNumber = 9007199254740991n;
        ```

-   **对象类型 (Object Type)**:
    -   **Object**: 键值对的集合，是 JS 中最复杂的数据结构。数组、函数等都是特殊的对象。
        ```javascript
        let person = {
          name: "Bob",
          age: 30
        };
        ```

### 3. 变量与常量 (Variables & Constants)

-   **`var`**: 函数作用域，存在变量提升 (hoisting)，可以被重复声明和重新赋值。在现代 JS 中已不推荐使用。
    ```javascript
    var x = 10;
    ```
-   **`let`**: 块级作用域 (`{}` 内)，不存在变量提升，不能被重复声明，但可以被重新赋值。
    ```javascript
    let y = 20;
    y = 21; // OK
    ```
-   **`const`**: 块级作用域，不存在变量提升，不能被重复声明。声明时必须初始化，且其值（对于原始类型）或引用（对于对象类型）不能被改变。
    ```javascript
    const PI = 3.14;
    // PI = 3.14159; // TypeError

    const user = { name: "Carol" };
    user.name = "Dave"; // OK, 修改对象内部属性可以
    // user = { name: "Eve" }; // TypeError, 不能重新赋值
    ```

### 4. 运算符 (Operators)

-   **赋值运算符**: `=`, `+=`, `-=`, `*=`, `/=`, `%=`
-   **算术运算符**: `+`, `-`, `*`, `/`, `%` (取模), `++` (自增), `--` (自减)
-   **比较运算符**:
    -   `==` (等于, 会进行类型转换)
    -   `===` (严格等于, 不进行类型转换)
    -   `!=` (不等于, 会进行类型转换)
    -   `!==` (严格不等于, 不进行类型转换)
    -   `>`, `<`, `>=`, `<=`
-   **逻辑运算符**:
    -   `&&` (逻辑与, AND)
    -   `||` (逻辑或, OR)
    -   `!` (逻辑非, NOT)
-   **三元运算符**: `condition ? valueIfTrue : valueIfFalse`
    ```javascript
    let access = age >= 18 ? "Granted" : "Denied";
    ```
-   **位运算符**: `&`, `|`, `^`, `~`, `<<`, `>>`
-   **其他运算符**:
    -   `typeof`: 返回操作数的数据类型字符串。
    -   `instanceof`: 判断对象是否是某个构造函数的实例。
    -   `delete`: 删除对象的属性。
    -   `in`: 判断对象是否包含某个属性。
    -   `...` (展开/剩余语法): 展开数组/对象，或收集函数参数。
    -   `?.` (可选链): 安全地访问深层嵌套的属性。
    -   `??` (空值合并): 当左侧操作数为 `null` 或 `undefined` 时，返回右侧操作数。

### 5. 控制流 (Control Flow)

-   **条件语句 (Conditional Statements)**:
    -   `if...else...else if`:
        ```javascript
        if (score >= 90) {
          console.log("A");
        } else if (score >= 80) {
          console.log("B");
        } else {
          console.log("C");
        }
        ```
    -   `switch`:
        ```javascript
        switch (day) {
          case "Monday":
            console.log("Start of the week");
            break;
          case "Friday":
            console.log("End of the week");
            break;
          default:
            console.log("Midweek");
        }
        ```
-   **循环语句 (Loops)**:
    -   `for`:
        ```javascript
        for (let i = 0; i < 5; i++) {
          console.log(i);
        }
        ```
    -   `while`:
        ```javascript
        let count = 0;
        while (count < 5) {
          console.log(count);
          count++;
        }
        ```
    -   `do...while`: 至少执行一次。
        ```javascript
        let i = 0;
        do {
          console.log(i);
          i++;
        } while (i < 5);
        ```
    -   `for...in`: 遍历对象的**可枚举属性名 (键)**。不推荐用于遍历数组。
        ```javascript
        const obj = { a: 1, b: 2 };
        for (const key in obj) {
          console.log(key, obj[key]); // 'a' 1, 'b' 2
        }
        ```
    -   `for...of` (ES6+): 遍历**可迭代对象 (Iterable)** 的值，如数组、字符串、Map、Set 等。
        ```javascript
        const arr = ['a', 'b', 'c'];
        for (const value of arr) {
          console.log(value); // 'a', 'b', 'c'
        }
        ```
-   **循环控制 (Loop Control)**:
    -   `break`: 立即跳出整个循环。
    -   `continue`: 跳过当前迭代，进入下一次迭代。

### 6. 函数 (Functions)

-   **函数声明 (Function Declaration)**:
    -   会被提升 (hoisted)。
    ```javascript
    function greet(name) {
      return `Hello, ${name}!`;
    }
    ```
-   **函数表达式 (Function Expression)**:
    -   不会被提升。
    ```javascript
    const greet = function(name) {
      return `Hello, ${name}!`;
    };
    ```
-   **箭头函数 (Arrow Function, ES6+)**:
    -   语法更简洁，没有自己的 `this`、`arguments`，`this` 继承自外层作用域。
    ```javascript
    const add = (a, b) => a + b;
    ```
-   **参数与返回值 (Parameters & Return)**:
    -   **默认参数 (Default Parameters)**: `function fn(p = 'default') {}`
    -   **剩余参数 (Rest Parameters)**: `function fn(...args) {}`
    -   `return` 语句用于返回值，如果没有 `return`，函数默认返回 `undefined`。
-   **作用域与闭包 (Scope & Closures)**:
    -   **作用域 (Scope)**: 决定了变量和函数的可见性。分为全局作用域、函数作用域和块级作用域。
    -   **闭包 (Closure)**: 一个函数和对其周围状态（词法环境）的引用捆绑在一起。内层函数可以访问外层函数的变量，即使外层函数已经执行完毕。
-   **`this` 关键字**:
    -   `this` 的值在函数调用时确定，取决于函数的调用方式。
    -   **全局上下文**: `window` (浏览器) 或 `global` (Node.js)。
    -   **函数调用**: 非严格模式下是全局对象，严格模式下是 `undefined`。
    -   **方法调用**: `obj.method()`，`this` 指向 `obj`。
    -   **构造函数**: `new MyClass()`，`this` 指向新创建的实例。
    -   **箭头函数**: `this` 继承自外层词法作用域。
    -   **显式绑定**: 使用 `call()`, `apply()`, `bind()` 方法可以手动设置 `this` 的值。

### 7. 对象 (Objects)

-   **对象字面量 (Object Literals)**:
    ```javascript
    const car = {
      brand: "Toyota",
      model: "Camry",
      year: 2021,
      start: function() {
        console.log("Engine started!");
      }
    };
    ```
-   **属性访问与修改**:
    -   点表示法: `car.brand`
    -   方括号表示法: `car['model']` (当属性名是变量或包含特殊字符时使用)
-   **ES6+ 增强**:
    -   **属性简写**: 如果变量名和属性名相同，可以简写。
        ```javascript
        const name = "Alice";
        const user = { name }; // 等同于 { name: name }
        ```
    -   **方法简写**: 省略 `function` 关键字。
        ```javascript
        const obj = {
          myMethod() { /* ... */ }
        };
        ```
    -   **计算属性名**:
        ```javascript
        const propName = "dynamicProp";
        const obj = {
          [propName]: "value"
        };
        ```

### 8. 数组 (Arrays)

-   **数组字面量**: `const fruits = ["Apple", "Banana", "Cherry"];`
-   **访问元素**: 通过索引 `fruits[0]` (返回 "Apple")。
-   **常用方法**:
    -   **修改原数组**:
        -   `push()`: 在末尾添加元素。
        -   `pop()`: 删除并返回末尾元素。
        -   `shift()`: 删除并返回首位元素。
        -   `unshift()`: 在首位添加元素。
        -   `splice()`: 在任意位置添加/删除元素。
        -   `sort()`: 对数组进行排序。
        -   `reverse()`: 翻转数组。
    -   **不修改原数组 (返回新数组)**:
        -   `slice()`: 提取数组的一部分。
        -   `concat()`: 合并数组。
        -   `map()`: 对每个元素执行函数，返回新数组。
        -   `filter()`: 过滤元素，返回新数组。
        -   `reduce()`: 将数组元素累积为一个值。
    -   **遍历与查找**:
        -   `forEach()`: 遍历数组，无返回值。
        -   `find()`: 返回第一个满足条件的元素。
        -   `findIndex()`: 返回第一个满足条件的元素的索引。
        -   `every()`: 检测是否所有元素都满足条件。
        -   `some()`: 检测是否至少有一个元素满足条件。
        -   `includes()`: 判断数组是否包含某个值。

### 9. ES6+ 核心新特性 (Core ES6+ Features)

-   **类 (Classes)**:
    -   基于原型继承的语法糖。
    ```javascript
    class Animal {
      constructor(name) {
        this.name = name;
      }
      speak() {
        console.log(`${this.name} makes a noise.`);
      }
    }
    class Dog extends Animal {
      speak() {
        console.log(`${this.name} barks.`);
      }
    }
    const d = new Dog('Mitzie');
    d.speak(); // "Mitzie barks."
    ```
-   **解构赋值 (Destructuring Assignment)**:
    -   从数组或对象中提取值并赋给变量。
    ```javascript
    // 对象解构
    const { name, age } = { name: "Frank", age: 40 };
    // 数组解构
    const [first, second] = [1, 2, 3];
    ```
-   **模板字符串 (Template Literals)**:
    -   使用反引号 `` ` ``，支持多行和嵌入变量 `${...}`。
-   **`Set` 和 `Map`**:
    -   `Set`: 存储唯一值的集合。
    -   `Map`: 存储键值对的集合，键可以是任意类型。

### 10. 异步编程 (Asynchronous Programming)

-   **回调函数 (Callbacks)**: 将函数作为参数传递，在异步操作完成后调用。容易导致“回调地狱”。
-   **Promise (ES6+)**:
    -   一个表示异步操作最终完成或失败的对象。有三种状态: `pending` (进行中)、`fulfilled` (已成功)、`rejected` (已失败)。
    -   使用 `.then()` 处理成功，`.catch()` 处理失败，`.finally()` 处理最终操作。
    ```javascript
    fetch('https://api.example.com/data')
      .then(response => response.json())
      .then(data => console.log(data))
      .catch(error => console.error('Error:', error));
    ```
-   **`async/await` (ES2017+)**:
    -   基于 Promise 的语法糖，让异步代码看起来像同步代码。
    -   `async` 关键字用于声明一个异步函数，该函数会隐式返回一个 Promise。
    -   `await` 关键字用于等待一个 Promise 的结果，只能在 `async` 函数中使用。
    ```javascript
    async function fetchData() {
      try {
        const response = await fetch('https://api.example.com/data');
        const data = await response.json();
        console.log(data);
      } catch (error) {
        console.error('Error:', error);
      }
    }
    ```

### 11. 模块化 (Modules)

-   **ES Modules (ESM)**:
    -   **`export`**: 导出函数、对象或原始值，以便其他模块可以使用它们。
        -   命名导出: `export const name = '...';`
        -   默认导出: `export default function() { ... };` (每个模块只能有一个)
    -   **`import`**: 从其他模块导入 `export` 的内容。
        ```javascript
        // 导入命名导出
        import { name, age } from './myModule.js';
        // 导入默认导出
        import myDefaultFunction from './myModule.js';
        // 导入所有
        import * as myModule from './myModule.js';
        ```

### 12. 错误处理 (Error Handling)

-   **`try...catch...finally`**:
    -   `try` 块: 包含可能抛出错误的代码。
    -   `catch` 块: 如果 `try` 块中发生错误，则执行此块。
    -   `finally` 块: 无论是否发生错误，都会执行此块。
-   **`throw`**:
    -   手动抛出一个错误。
    ```javascript
    try {
      if (user.age < 18) {
        throw new Error("User is underage");
      }
    } catch (e) {
      console.error(e.name + ': ' + e.message);
    } finally {
      console.log("Validation attempt finished.");
    }
    ```

### 13. JSON

-   **JSON (JavaScript Object Notation)**: 一种轻量级的数据交换格式，语法是 JS 对象语法的子集。
-   **`JSON.stringify()`**: 将 JS 对象或值转换为 JSON 字符串。
-   **`JSON.parse()`**: 将 JSON 字符串解析为 JS 对象或值。
    ```javascript
    const userObject = { name: "Grace", id: 101 };
    const jsonString = JSON.stringify(userObject); // '{"name":"Grace","id":101}'
    const parsedObject = JSON.parse(jsonString);   // { name: "Grace", id: 101 }
    ```

### 14. Web APIs (浏览器环境)

这些不是 JS 核心语言的一部分，而是由浏览器提供的功能，JS 可以调用它们来与网页交互。

-   **DOM (Document Object Model)**:
    -   操作 HTML 和 XML 文档的接口。
    -   `document.getElementById()`, `document.querySelector()`, `element.innerHTML`, `element.style`, `element.addEventListener()` 等。
-   **定时器 (Timers)**:
    -   `setTimeout(callback, delay)`: 延迟执行。
    -   `setInterval(callback, interval)`: 定时重复执行。
-   **Fetch API**:
    -   用于发起网络请求（如获取数据）。是 `XMLHttpRequest` 的现代替代品。